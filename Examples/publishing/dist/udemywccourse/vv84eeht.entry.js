/*! Built with http://stenciljs.com */
const{h:t}=window.UdemyWCCourse;import{a as e}from"./chunk-98b35419.js";class o{constructor(){this.stockInputValid=!1,this.loading=!1}stockSymbolChanged(t,e){t!==e&&(this.stockUserInput=t,this.stockInputValid=!0,this.fetchStockPrice(t))}onUserInput(t){this.stockUserInput=t.target.value,this.stockInputValid=""!==this.stockUserInput.trim()}onFetchStockPrice(t){t.preventDefault(),this.stockSymbol=this.stockInput.value}componentWillLoad(){console.log("componentWillLoad"),console.log(this.stockSymbol)}componentDidLoad(){console.log("componentDidLoad"),this.stockSymbol&&(this.stockUserInput=this.stockSymbol,this.stockInputValid=!0,this.fetchStockPrice(this.stockSymbol))}componentWillUpdate(){console.log("componentWillUpdate")}componentDidUpdate(){console.log("componentDidUpdate")}componentDidUnload(){console.log("componentDidUnload")}onStockSymbolSelected(t){console.log("stock symbol selected: "+t.detail),t.detail&&t.detail!==this.stockSymbol&&(this.stockSymbol=t.detail)}fetchStockPrice(t){this.loading=!0,fetch(`https://www.alphavantage.co/query?function=GLOBAL_QUOTE&symbol=${t}&apikey=${e}`).then(t=>{if(200!==t.status)throw new Error("Invalid!");return t.json()}).then(t=>{if(!t["Global Quote"]["05. price"])throw new Error("Invalid symbol!");this.error=null,this.fetchedPrice=+t["Global Quote"]["05. price"],this.loading=!1}).catch(t=>{this.error=t.message,this.fetchedPrice=null,this.loading=!1})}hostData(){return{class:this.error?"error":""}}render(){let e=t("p",null,"Please enter a symbol!");return this.error&&(e=t("p",null,this.error)),this.fetchedPrice&&(e=t("p",null,"Price: $",this.fetchedPrice)),this.loading&&(e=t("uc-spinner",null)),[t("form",{onSubmit:this.onFetchStockPrice.bind(this)},t("input",{id:"stock-symbol",ref:t=>this.stockInput=t,value:this.stockUserInput,onInput:this.onUserInput.bind(this)}),t("button",{type:"submit",disabled:!this.stockInputValid||this.loading},"Fetch")),t("div",null,e)]}static get is(){return"uc-stock-price"}static get encapsulation(){return"shadow"}static get properties(){return{el:{elementRef:!0},error:{state:!0},fetchedPrice:{state:!0},loading:{state:!0},stockInputValid:{state:!0},stockSymbol:{type:String,attr:"stock-symbol",reflectToAttr:!0,mutable:!0,watchCallbacks:["stockSymbolChanged"]},stockUserInput:{state:!0}}}static get listeners(){return[{name:"body:ucSymbolSelected",method:"onStockSymbolSelected"}]}static get style(){return":host{font-family:sans-serif;border:2px solid #3b013b;margin:2rem;padding:1rem;display:block;width:20rem;max-width:100%}:host(.error){border-color:#e79804}form input{font:inherit;color:#3b013b;padding:.1rem .25rem;display:block;margin-bottom:.5rem}form button:focus,form input:focus{outline:none}form button{font:inherit;padding:.25rem .5rem;border:1px solid #3b013b;background:#3b013b;color:#fff;cursor:pointer}form button:active,form button:hover{background:#750175;border-color:#750175}form button:disabled{background:#ccc;border-color:#ccc;color:#fff;cursor:not-allowed}"}}export{o as UcStockPrice};